# è‚¡ç¥¨äº¤æ˜“æ™ºèƒ½ä½“ç³»ç»Ÿ - å®‰è£…éƒ¨ç½²æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [ä¸€ã€ç³»ç»Ÿè¦æ±‚](#ä¸€ç³»ç»Ÿè¦æ±‚)
- [äºŒã€ç¯å¢ƒå‡†å¤‡](#äºŒç¯å¢ƒå‡†å¤‡)
- [ä¸‰ã€å®‰è£…æ­¥éª¤](#ä¸‰å®‰è£…æ­¥éª¤)
- [å››ã€é…ç½®è¯´æ˜](#å››é…ç½®è¯´æ˜)
- [äº”ã€è¿è¡Œç³»ç»Ÿ](#äº”è¿è¡Œç³»ç»Ÿ)
- [å…­ã€éªŒè¯å®‰è£…](#å…­éªŒè¯å®‰è£…)
- [ä¸ƒã€å¸¸è§é—®é¢˜](#ä¸ƒå¸¸è§é—®é¢˜)
- [å…«ã€ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#å…«ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)

---

## ä¸€ã€ç³»ç»Ÿè¦æ±‚

### 1.1 æ“ä½œç³»ç»Ÿ

æ”¯æŒä»¥ä¸‹æ“ä½œç³»ç»Ÿï¼š
- **Windows**: Windows 10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Linux**: Ubuntu 18.04+ / CentOS 7+ / Debian 10+ ç­‰ä¸»æµå‘è¡Œç‰ˆ
- **macOS**: macOS 10.14+ (Mojave æˆ–æ›´é«˜ç‰ˆæœ¬)

### 1.2 Python ç‰ˆæœ¬

- **Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬**ï¼ˆæ¨è 3.9 - 3.11ï¼‰
- å¿…é¡»å®‰è£… `pip` åŒ…ç®¡ç†å™¨

**æ£€æŸ¥Pythonç‰ˆæœ¬**ï¼š
```bash
python --version
# æˆ–
python3 --version
```

### 1.3 ç¡¬ä»¶è¦æ±‚

**æœ€ä½é…ç½®**ï¼š
- CPU: 2æ ¸å¿ƒ
- å†…å­˜: 4GB RAM
- ç£ç›˜: 2GB å¯ç”¨ç©ºé—´

**æ¨èé…ç½®**ï¼ˆç”¨äºå®Œæ•´åŠŸèƒ½ï¼‰ï¼š
- CPU: 4æ ¸å¿ƒæˆ–æ›´å¤š
- å†…å­˜: 8GB RAM æˆ–æ›´å¤š
- ç£ç›˜: 5GB å¯ç”¨ç©ºé—´ï¼ˆåŒ…å«æ¨¡å‹å’Œä¾èµ–ï¼‰

**AIåŠŸèƒ½ï¼ˆOllamaï¼‰é¢å¤–è¦æ±‚**ï¼š
- å†…å­˜: è‡³å°‘ 16GB RAMï¼ˆç”¨äºè¿è¡Œ qwen2.5:32b æ¨¡å‹ï¼‰
- ç£ç›˜: è‡³å°‘ 20GB å¯ç”¨ç©ºé—´ï¼ˆç”¨äºå­˜å‚¨æ¨¡å‹æ–‡ä»¶ï¼‰

### 1.4 ç½‘ç»œè¦æ±‚

- ç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼ˆç”¨äºè·å–è‚¡ç¥¨æ•°æ®ï¼‰
- å¯ä»¥è®¿é—®å›½å†…é•œåƒæºï¼ˆç”¨äºåŠ é€Ÿä¾èµ–åŒ…å®‰è£…ï¼‰

---

## äºŒã€ç¯å¢ƒå‡†å¤‡

### 2.1 å®‰è£… Python

#### Windows ç³»ç»Ÿ

1. è®¿é—® [Pythonå®˜ç½‘](https://www.python.org/downloads/)
2. ä¸‹è½½ Python 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
3. è¿è¡Œå®‰è£…ç¨‹åºï¼Œ**åŠ¡å¿…å‹¾é€‰** "Add Python to PATH"
4. å®Œæˆå®‰è£…åï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦éªŒè¯ï¼š
   ```cmd
   python --version
   pip --version
   ```

#### Linux ç³»ç»Ÿ

**Ubuntu/Debian**:
```bash
sudo apt update
sudo apt install python3 python3-pip python3-venv
```

**CentOS/RHEL**:
```bash
sudo yum install python3 python3-pip
# æˆ–ä½¿ç”¨ dnf (CentOS 8+)
sudo dnf install python3 python3-pip
```

#### macOS ç³»ç»Ÿ

**æ–¹æ³•1ï¼šä½¿ç”¨Homebrewï¼ˆæ¨èï¼‰**
```bash
brew install python3
```

**æ–¹æ³•2ï¼šä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…**
1. è®¿é—® [Pythonå®˜ç½‘](https://www.python.org/downloads/)
2. ä¸‹è½½ macOS å®‰è£…åŒ…å¹¶å®‰è£…

### 2.2 å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆLinux/macOSï¼‰

#### TA-Lib Cåº“å®‰è£…

TA-Lib éœ€è¦å…ˆå®‰è£… C åº“ï¼Œç„¶åæ‰èƒ½å®‰è£… Python åŒ…ã€‚

**Ubuntu/Debian**:
```bash
sudo apt install build-essential
wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz
tar -xzf ta-lib-0.4.0-src.tar.gz
cd ta-lib/
./configure --prefix=/usr
make
sudo make install
cd ..
rm -rf ta-lib ta-lib-0.4.0-src.tar.gz
```

**macOS**:
```bash
brew install ta-lib
```

**Windows**:
- è®¿é—® https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib
- ä¸‹è½½å¯¹åº”çš„ whl æ–‡ä»¶å®‰è£…
- æˆ–ä½¿ç”¨ conda: `conda install -c conda-forge ta-lib`

### 2.3 é…ç½® pip é•œåƒæºï¼ˆå¯é€‰ï¼Œæ¨èï¼‰

ä¸ºäº†åŠ é€Ÿä¾èµ–åŒ…ä¸‹è½½ï¼Œå»ºè®®é…ç½®å›½å†…é•œåƒæºã€‚

**Windows**:
1. åˆ›å»ºæ–‡ä»¶ï¼š`%APPDATA%\pip\pip.ini`
2. æ·»åŠ å†…å®¹ï¼š
   ```ini
   [global]
   index-url = https://pypi.tuna.tsinghua.edu.cn/simple
   trusted-host = pypi.tuna.tsinghua.edu.cn
   ```

**Linux/macOS**:
1. åˆ›å»ºç›®å½•ï¼š`mkdir -p ~/.pip`
2. åˆ›å»ºæ–‡ä»¶ï¼š`~/.pip/pip.conf`
3. æ·»åŠ å†…å®¹ï¼š
   ```ini
   [global]
   index-url = https://pypi.tuna.tsinghua.edu.cn/simple
   trusted-host = pypi.tuna.tsinghua.edu.cn
   ```

---

## ä¸‰ã€å®‰è£…æ­¥éª¤

### 3.1 è·å–é¡¹ç›®ä»£ç 

**æ–¹æ³•1ï¼šå…‹éš†ä»£ç åº“**ï¼ˆå¦‚æœæœ‰ï¼‰
```bash
git clone <repository-url>
cd stock-predict
```

**æ–¹æ³•2ï¼šè§£å‹é¡¹ç›®æ–‡ä»¶**
```bash
# å°†é¡¹ç›®æ–‡ä»¶è§£å‹åˆ°ç›®æ ‡ç›®å½•
cd stock-predict
```

### 3.2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

**Windows**:
```cmd
python -m venv venv
venv\Scripts\activate
```

**Linux/macOS**:
```bash
python3 -m venv venv
source venv/bin/activate
```

æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œå‘½ä»¤æç¤ºç¬¦å‰ä¼šæ˜¾ç¤º `(venv)`ã€‚

### 3.3 å®‰è£…åŸºç¡€ä¾èµ–

**ä½¿ç”¨å›½å†…é•œåƒæºå®‰è£…**ï¼ˆæ¨èï¼‰ï¼š
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**æˆ–ä½¿ç”¨é»˜è®¤æº**ï¼š
```bash
pip install -r requirements.txt
```

**å®‰è£…è¿‡ç¨‹è¯´æ˜**ï¼š
- é¦–æ¬¡å®‰è£…å¯èƒ½éœ€è¦ 5-10 åˆ†é’Ÿ
- å¦‚æœæŸä¸ªåŒ…å®‰è£…å¤±è´¥ï¼Œå¯ä»¥å•ç‹¬å®‰è£…ï¼š
  ```bash
  pip install <package-name> -i https://pypi.tuna.tsinghua.edu.cn/simple
  ```

### 3.4 å®‰è£…å¯é€‰ä¾èµ–

#### XGBoost å’Œ LightGBMï¼ˆæ¨èå®‰è£…ï¼‰

è¿™ä¸¤ä¸ªåŒ…å¯ä»¥æ˜¾è‘—æå‡é¢„æµ‹æ€§èƒ½ï¼Œå¼ºçƒˆå»ºè®®å®‰è£…ã€‚

**ä½¿ç”¨å›½å†…é•œåƒæº**ï¼š
```bash
pip install xgboost lightgbm -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**å¦‚æœé‡åˆ°SSLé”™è¯¯**ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨condaï¼ˆå¦‚æœå·²å®‰è£…condaï¼‰
conda install -c conda-forge xgboost lightgbm

# æ–¹æ³•2ï¼šå¢åŠ è¶…æ—¶æ—¶é—´
pip install xgboost lightgbm --default-timeout=100 -i https://pypi.tuna.tsinghua.edu.cn/simple
```

#### TensorFlowï¼ˆå¯é€‰ï¼Œç”¨äºLSTMæ¨¡å‹ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼š
```bash
pip install tensorflow==2.15.0 -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**æ³¨æ„**ï¼šTensorFlow å®‰è£…åŒ…è¾ƒå¤§ï¼ˆçº¦500MBï¼‰ï¼Œé¦–æ¬¡å®‰è£…éœ€è¦è¾ƒé•¿æ—¶é—´ã€‚

#### SHAPï¼ˆå¯é€‰ï¼Œç”¨äºæ¨¡å‹å¯è§£é‡Šæ€§ï¼‰

```bash
pip install "shap<0.44" -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**é‡è¦**ï¼šå¿…é¡»ä½¿ç”¨ `<0.44` ç‰ˆæœ¬ï¼Œä»¥å…¼å®¹ NumPy 1.xã€‚

### 3.5 å®‰è£… Ollamaï¼ˆå¯é€‰ï¼Œç”¨äºAIåˆ†æï¼‰

å¦‚æœä¸å®‰è£… Ollamaï¼ŒAIåˆ†æåŠŸèƒ½å°†ä¸å¯ç”¨ï¼Œä½†ä¸å½±å“å…¶ä»–æ ¸å¿ƒåŠŸèƒ½ã€‚

#### Windows/macOS

1. è®¿é—® https://ollama.ai
2. ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…
3. è¿è¡Œå®‰è£…ç¨‹åº
4. éªŒè¯å®‰è£…ï¼š
   ```bash
   ollama --version
   ```

#### Linux

```bash
curl https://ollama.ai/install.sh | sh
```

#### ä¸‹è½½æ¨¡å‹

å®‰è£…å®Œæˆåï¼Œä¸‹è½½ qwen2.5:32b æ¨¡å‹ï¼š
```bash
ollama pull qwen2.5:32b
```

**æ³¨æ„**ï¼šæ¨¡å‹æ–‡ä»¶è¾ƒå¤§ï¼ˆçº¦18GBï¼‰ï¼Œä¸‹è½½éœ€è¦è¾ƒé•¿æ—¶é—´ã€‚

### 3.6 éªŒè¯ä¾èµ–å®‰è£…

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯å…³é”®ä¾èµ–æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```bash
python -c "import flask; import pandas; import numpy; import sklearn; import plotly; print('åŸºç¡€ä¾èµ–å®‰è£…æˆåŠŸï¼')"
```

**æ£€æŸ¥å¯é€‰ä¾èµ–**ï¼š
```bash
# æ£€æŸ¥XGBoost
python -c "import xgboost; print(f'XGBoostç‰ˆæœ¬: {xgboost.__version__}')"

# æ£€æŸ¥LightGBM
python -c "import lightgbm; print(f'LightGBMç‰ˆæœ¬: {lightgbm.__version__}')"

# æ£€æŸ¥TensorFlow
python -c "import tensorflow as tf; print(f'TensorFlowç‰ˆæœ¬: {tf.__version__}')"

# æ£€æŸ¥TA-Lib
python -c "import talib; print('TA-Libå®‰è£…æˆåŠŸï¼')"
```

---

## å››ã€é…ç½®è¯´æ˜

### 4.1 ç³»ç»Ÿé…ç½®

ç¼–è¾‘ `config/settings.py` æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š

```python
# Flaské…ç½®
DEBUG = True          # ç”Ÿäº§ç¯å¢ƒè¯·è®¾ç½®ä¸º False
HOST = '0.0.0.0'      # 0.0.0.0 å…è®¸å¤–éƒ¨è®¿é—®ï¼Œ127.0.0.1 ä»…æœ¬åœ°è®¿é—®
PORT = 5000           # ç«¯å£å·ï¼Œå¦‚æœè¢«å ç”¨å¯ä»¥ä¿®æ”¹

# è´¦æˆ·æ¨¡æ‹Ÿé…ç½®
DEFAULT_ACCOUNT = {
    'total_assets': 100000,    # æ€»èµ„äº§ï¼ˆå…ƒï¼‰
    'available_cash': 50000,   # å¯ç”¨èµ„é‡‘ï¼ˆå…ƒï¼‰
    'positions': {}            # åˆå§‹æŒä»“
}

# é¢„æµ‹é…ç½®
PREDICTION_DAYS = 5   # é¢„æµ‹æœªæ¥å¤©æ•°
LOOKBACK_DAYS = 60    # ä½¿ç”¨è¿‡å»å¤šå°‘å¤©æ•°æ®
```

### 4.2 è§„åˆ™é…ç½®

ç¼–è¾‘ `config/rules.json` æ–‡ä»¶ä¿®æ”¹ä¸šåŠ¡è§„åˆ™ã€‚

**æ³¨æ„äº‹é¡¹**ï¼š
- ä¿®æ”¹è§„åˆ™æ–‡ä»¶åéœ€è¦é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ
- JSON æ ¼å¼å¿…é¡»æ­£ç¡®ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥

### 4.3 Ollama é…ç½®

é»˜è®¤é…ç½®ï¼š
- **åœ°å€**ï¼š`http://localhost:11434`
- **æ¨¡å‹**ï¼š`qwen2.5:32b`
- **è¶…æ—¶æ—¶é—´**ï¼š30ç§’

å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ `app.py` ä¸­çš„ç›¸å…³å‡½æ•°ã€‚

---

## äº”ã€è¿è¡Œç³»ç»Ÿ

### 5.1 å¯åŠ¨æ–¹å¼

#### æ–¹æ³•1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

**Windows**:
```cmd
# åŒå‡»è¿è¡Œ
script\start.bat

# æˆ–å‘½ä»¤è¡Œè¿è¡Œ
script\start.bat
```

**Linux/macOS**:
```bash
# æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
chmod +x script/start.sh

# è¿è¡Œ
./script/start.sh

# æˆ–
bash script/start.sh
```

å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥ Python ç¯å¢ƒ
2. æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–åŒ…
3. å¯åŠ¨ Web æœåŠ¡

#### æ–¹æ³•2ï¼šç›´æ¥è¿è¡Œ

**ç¡®ä¿å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**ï¼Œç„¶åè¿è¡Œï¼š

```bash
python main.py
```

**æ³¨æ„**ï¼šä¸è¦ç›´æ¥è¿è¡Œ `app.py`ï¼Œä½¿ç”¨ `main.py` ä½œä¸ºå…¥å£ã€‚

### 5.2 è®¿é—®ç³»ç»Ÿ

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š

```
http://localhost:5000
```

å¦‚æœæ˜¯å±€åŸŸç½‘è®¿é—®ï¼Œä½¿ç”¨æœåŠ¡å™¨IPåœ°å€ï¼š
```
http://<æœåŠ¡å™¨IP>:5000
```

### 5.3 åœæ­¢æœåŠ¡

åœ¨è¿è¡ŒæœåŠ¡çš„ç»ˆç«¯çª—å£ä¸­æŒ‰ `Ctrl+C` åœæ­¢æœåŠ¡ã€‚

---

## å…­ã€éªŒè¯å®‰è£…

### 6.1 æ£€æŸ¥æœåŠ¡çŠ¶æ€

è®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š
- ä¸»é¡µï¼šhttp://localhost:5000
- åº”è¯¥çœ‹åˆ°èŠå¤©ç•Œé¢å’Œæ¬¢è¿ä¿¡æ¯

### 6.2 æµ‹è¯•åŸºç¡€åŠŸèƒ½

åœ¨Webç•Œé¢ä¸­è¾“å…¥æµ‹è¯•æŸ¥è¯¢ï¼š
```
å¸®æˆ‘é¢„æµ‹ä¸€ä¸ªè‚¡ç¥¨çš„èµ°åŠ¿ï¼Œè‚¡ç¥¨ä»£ç æ˜¯ 000001
```

å¦‚æœç³»ç»Ÿæ­£å¸¸å“åº”å¹¶æ˜¾ç¤ºç»“æœï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚

### 6.3 è¿è¡Œæµ‹è¯•è„šæœ¬

**æµ‹è¯•ä»·æ ¼è·å–**ï¼š
```bash
python testcase/test_price.py
```

**æµ‹è¯•è§„åˆ™è§¦å‘**ï¼š
```bash
python testcase/test_rules.py
```

**è¿è¡Œåœºæ™¯æ¼”ç¤º**ï¼š
```bash
python testcase/demo_scenarios.py
```

### 6.4 æ£€æŸ¥APIæ¥å£

ä½¿ç”¨curlæˆ–æµè§ˆå™¨è®¿é—®ä»¥ä¸‹æ¥å£ï¼š

```bash
# æ£€æŸ¥è´¦æˆ·ä¿¡æ¯
curl http://localhost:5000/api/account

# åº”è¯¥è¿”å›JSONæ ¼å¼çš„è´¦æˆ·ä¿¡æ¯
```

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### 7.1 Python ç›¸å…³

#### Q: æç¤º "pythonä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤"
**A**: Pythonæœªå®‰è£…æˆ–æœªæ·»åŠ åˆ°PATHã€‚è§£å†³ï¼š
1. æ£€æŸ¥Pythonæ˜¯å¦å®‰è£…ï¼šè®¿é—® python.org ä¸‹è½½å®‰è£…
2. å®‰è£…æ—¶åŠ¡å¿…å‹¾é€‰ "Add Python to PATH"
3. æˆ–æ‰‹åŠ¨æ·»åŠ Pythonåˆ°ç³»ç»ŸPATHç¯å¢ƒå˜é‡

#### Q: pipå‘½ä»¤ä¸å¯ç”¨
**A**: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…pipï¼š
```bash
python -m ensurepip --upgrade
```

### 7.2 ä¾èµ–å®‰è£…é—®é¢˜

#### Q: NumPyç‰ˆæœ¬å†²çª
**é”™è¯¯ä¿¡æ¯**ï¼š`numpy 2.0` ä¸æŸäº›åŒ…ä¸å…¼å®¹

**A**: å¿…é¡»ä½¿ç”¨ NumPy 1.x ç‰ˆæœ¬ï¼š
```bash
pip install "numpy<2.0.0" --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple
```

#### Q: TA-Lib å®‰è£…å¤±è´¥
**é”™è¯¯ä¿¡æ¯**ï¼š`Microsoft Visual C++ 14.0 is required` æˆ–æ‰¾ä¸åˆ° ta-lib.h

**A**:
- **Windows**: è®¿é—® https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„whlæ–‡ä»¶å®‰è£…ï¼Œæˆ–ä½¿ç”¨conda
- **Linux**: å…ˆå®‰è£…TA-Lib Cåº“ï¼ˆè§"ç¯å¢ƒå‡†å¤‡"éƒ¨åˆ†ï¼‰
- **macOS**: ä½¿ç”¨ `brew install ta-lib`

#### Q: XGBoost/LightGBM å®‰è£…å¤±è´¥ï¼ˆSSLé”™è¯¯ï¼‰
**A**: ä½¿ç”¨å›½å†…é•œåƒæºï¼š
```bash
pip install xgboost lightgbm -i https://pypi.tuna.tsinghua.edu.cn/simple
```

æˆ–ä½¿ç”¨condaï¼š
```bash
conda install -c conda-forge xgboost lightgbm
```

### 7.3 è¿è¡Œé—®é¢˜

#### Q: ç«¯å£è¢«å ç”¨
**é”™è¯¯ä¿¡æ¯**ï¼š`Address already in use`

**A**: 
1. ä¿®æ”¹ `config/settings.py` ä¸­çš„ `PORT` ä¸ºå…¶ä»–ç«¯å£ï¼ˆå¦‚ 5001, 8080ï¼‰
2. æˆ–å…³é—­å ç”¨5000ç«¯å£çš„ç¨‹åºï¼š
   ```bash
   # Windows
   netstat -ano | findstr :5000
   taskkill /PID <è¿›ç¨‹ID> /F
   
   # Linux/macOS
   lsof -ti:5000 | xargs kill -9
   ```

#### Q: æ— æ³•è®¿é—® http://localhost:5000
**A**: 
1. æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼ˆæŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼‰
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿5000ç«¯å£æœªè¢«é˜»æ­¢
3. å¦‚æœæ˜¯è¿œç¨‹è®¿é—®ï¼Œç¡®ä¿HOSTè®¾ç½®ä¸º `0.0.0.0`

#### Q: è·å–è‚¡ç¥¨æ•°æ®å¤±è´¥
**A**: 
- è¿™æ˜¯æ­£å¸¸çš„ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
- å¦‚éœ€çœŸå®æ•°æ®ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤akshareç‰ˆæœ¬ï¼š`pip install --upgrade akshare`

### 7.4 AIåŠŸèƒ½é—®é¢˜

#### Q: AIåˆ†æåŠŸèƒ½ä¸å¯ç”¨
**A**: 
1. æ£€æŸ¥Ollamaæ˜¯å¦è¿è¡Œï¼š
   ```bash
   ollama list
   ```
2. æ£€æŸ¥æ¨¡å‹æ˜¯å¦ä¸‹è½½ï¼š
   ```bash
   ollama list | grep qwen
   ```
3. å¦‚æœæœªä¸‹è½½ï¼Œè¿è¡Œï¼š
   ```bash
   ollama pull qwen2.5:32b
   ```

### 7.5 æ€§èƒ½é—®é¢˜

#### Q: æ¨¡å‹è®­ç»ƒå¾ˆæ…¢
**A**: 
- é¦–æ¬¡è®­ç»ƒéœ€è¦è¾ƒé•¿æ—¶é—´ï¼ˆ1-3åˆ†é’Ÿï¼‰
- å¯ä»¥åªå®‰è£…åŸºç¡€ä¾èµ–ï¼Œè·³è¿‡XGBoostå’ŒLightGBM
- æˆ–å‡å°‘è®­ç»ƒæ•°æ®é‡ï¼ˆä¿®æ”¹LOOKBACK_DAYSé…ç½®ï¼‰

#### Q: å†…å­˜å ç”¨è¿‡é«˜
**A**: 
- å¦‚æœä½¿ç”¨Ollama AIåŠŸèƒ½ï¼Œéœ€è¦è‡³å°‘16GBå†…å­˜
- å¦‚æœä¸ä½¿ç”¨AIåŠŸèƒ½ï¼Œå…³é—­OllamaæœåŠ¡å¯ä»¥èŠ‚çœå†…å­˜
- å‡å°‘å¹¶å‘è¯·æ±‚æ•°é‡

---

## å…«ã€ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 8.1 åŸºæœ¬éƒ¨ç½²é…ç½®

#### ä¿®æ”¹é…ç½®

ç¼–è¾‘ `config/settings.py`ï¼š
```python
DEBUG = False        # å…³é—­è°ƒè¯•æ¨¡å¼
HOST = '0.0.0.0'     # å…è®¸å¤–éƒ¨è®¿é—®ï¼ˆæ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰
PORT = 5000          # ä½¿ç”¨æ ‡å‡†ç«¯å£æˆ–é…ç½®åå‘ä»£ç†
```

#### ä½¿ç”¨ç”Ÿäº§çº§WSGIæœåŠ¡å™¨

**ä½¿ç”¨Gunicornï¼ˆLinux/macOSï¼‰**ï¼š
```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

**ä½¿ç”¨Waitressï¼ˆè·¨å¹³å°ï¼‰**ï¼š
```bash
pip install waitress
waitress-serve --host=0.0.0.0 --port=5000 app:app
```

### 8.2 ä½¿ç”¨Nginxåå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

åˆ›å»ºNginxé…ç½® `/etc/nginx/sites-available/stock-predict`ï¼š
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

å¯ç”¨é…ç½®ï¼š
```bash
sudo ln -s /etc/nginx/sites-available/stock-predict /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### 8.3 ä½¿ç”¨systemdæœåŠ¡ï¼ˆLinuxï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/stock-predict.service`ï¼š
```ini
[Unit]
Description=Stock Predict Application
After=network.target

[Service]
Type=simple
User=your-username
WorkingDirectory=/path/to/stock-predict
Environment="PATH=/path/to/venv/bin"
ExecStart=/path/to/venv/bin/python main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl enable stock-predict
sudo systemctl start stock-predict
```

æŸ¥çœ‹çŠ¶æ€ï¼š
```bash
sudo systemctl status stock-predict
```

### 8.4 Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `Dockerfile`ï¼š
```dockerfile
FROM python:3.9-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    build-essential \
    wget \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…TA-Lib
RUN wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz && \
    tar -xzf ta-lib-0.4.0-src.tar.gz && \
    cd ta-lib/ && \
    ./configure --prefix=/usr && \
    make && \
    make install && \
    cd .. && \
    rm -rf ta-lib ta-lib-0.4.0-src.tar.gz

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 5000

# å¯åŠ¨åº”ç”¨
CMD ["python", "main.py"]
```

æ„å»ºå’Œè¿è¡Œï¼š
```bash
docker build -t stock-predict .
docker run -d -p 5000:5000 --name stock-predict stock-predict
```

### 8.5 å®‰å…¨å»ºè®®

1. **å…³é—­è°ƒè¯•æ¨¡å¼**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½® `DEBUG = False`
2. **ä½¿ç”¨HTTPS**ï¼šé…ç½®SSLè¯ä¹¦ï¼Œä½¿ç”¨HTTPSè®¿é—®
3. **é˜²ç«å¢™é…ç½®**ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£
4. **å®šæœŸæ›´æ–°**ï¼šåŠæ—¶æ›´æ–°ä¾èµ–åŒ…ä»¥ä¿®å¤å®‰å…¨æ¼æ´
5. **æ—¥å¿—ç›‘æ§**ï¼šé…ç½®æ—¥å¿—æ”¶é›†å’Œç›‘æ§ç³»ç»Ÿ

### 8.6 æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨ç¼“å­˜**ï¼šå¯¹è‚¡ç¥¨æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå‡å°‘APIè°ƒç”¨
2. **æ•°æ®åº“**ï¼šä½¿ç”¨æ•°æ®åº“å­˜å‚¨å†å²æ•°æ®ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½é‡æ–°è·å–
3. **è´Ÿè½½å‡è¡¡**ï¼šä½¿ç”¨å¤šä¸ªå®ä¾‹å’Œè´Ÿè½½å‡è¡¡å™¨
4. **CDN**ï¼šå¯¹é™æ€èµ„æºä½¿ç”¨CDNåŠ é€Ÿ

---

## ä¹ã€æ›´æ–°å’Œç»´æŠ¤

### 9.1 æ›´æ–°ä¾èµ–

å®šæœŸæ›´æ–°ä¾èµ–åŒ…ï¼š
```bash
pip install --upgrade -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 9.2 å¤‡ä»½é…ç½®

å®šæœŸå¤‡ä»½ä»¥ä¸‹æ–‡ä»¶ï¼š
- `config/settings.py`
- `config/rules.json`
- æ•°æ®åº“æ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨ï¼‰

### 9.3 æ—¥å¿—æŸ¥çœ‹

æ—¥å¿—é»˜è®¤è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®æ—¥å¿—æ–‡ä»¶ï¼š

ç¼–è¾‘ `app.py` ä¸­çš„æ—¥å¿—é…ç½®ï¼Œæ·»åŠ æ–‡ä»¶å¤„ç†å™¨ã€‚

---

## åã€è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
2. æŸ¥çœ‹é¡¹ç›® README.md
3. æ£€æŸ¥ç»ˆç«¯è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

---

**éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®ä¿ï¼š**
- âœ… æœåŠ¡å¯ä»¥æ­£å¸¸å¯åŠ¨
- âœ… Webç•Œé¢å¯ä»¥æ­£å¸¸è®¿é—®
- âœ… å¯ä»¥æˆåŠŸæŸ¥è¯¢è‚¡ç¥¨
- âœ… é¢„æµ‹åŠŸèƒ½æ­£å¸¸å·¥ä½œ

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€

